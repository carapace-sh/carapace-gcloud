# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: backup-dr
description: Manage Backup and DR resources.
commands:
    - name: backup-plan-associations
      description: Manage Backup and DR backup plan associations.
      commands:
        - name: create
          description: Create a new backup plan association.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --backup-plan=!: ID of the Backup Plan or fully qualified identifier for the Backup Plan.
            --location=: The location of the Backup Plan Association.
            --no-async&: Return immediately, without waiting for the operation in progress to
            --resource-type=!: Type of resource to which the backup plan should be applied.
            --resource=!: The resource to which the backup plan is to be applied.
            --workload-project=: Cloud project id for the Backup Plan Association.
        - name: delete
          description: Delete the specified backup plan association.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --location=: The location of the Backup Plan Association.
            --no-async&: Return immediately, without waiting for the operation in progress to
            --workload-project=: Cloud project id for the Backup Plan Association.
        - name: describe
          description: Show details of the backup plan association.
          flags:
            --location=: Location ID of the resource.
        - name: fetch-for-resource-type
          description: Fetch Backup Plan Associations for a given resource type and location.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=!: Location for which backup plan associations should be fetched.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
        - name: list
          description: List Backup and DR backup plan associations.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: ID of the location or fully qualified identifier for the location.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
        - name: trigger-backup
          description: Create an on-demand backup for a resource.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --backup-rule-id=: Name of an existing backup rule to use for creating an on-demand backup.
            --custom-retention-days=: Duration for which backup data will be retained.
            --labels=: Labels to be applied to the backup.
            --location=: The location of the Backup Plan Association.
            --no-async&: Return immediately, without waiting for the operation in progress to
            --workload-project=: Cloud project id for the Backup Plan Association.
        - name: update
          description: Update a specific backup plan within a backup plan association.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --backup-plan=!: ID of the Backup Plan or fully qualified identifier for the Backup Plan.
            --location=: The location of the Backup Plan Association.
            --no-async&: Return immediately, without waiting for the operation in progress to
            --workload-project=: Cloud project id for the Backup Plan Association.
    - name: backup-plan-revisions
      description: View Backup and DR backup plan revisions.
      commands:
        - name: describe
          description: Show details of the backup plan revision.
          flags:
            --backup-plan=: The ID of the Backup Plan
            --location=: Location ID of the resource.
        - name: list
          description: List backup plan revisions.
          flags:
            --backup-plan=: ID of the backup_plan or fully qualified identifier for the backup_plan.
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: Location ID of the resource.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
    - name: backup-plans
      description: Manage Backup and DR backup plans.
      commands:
        - name: create
          description: Creates a new Backup Plan.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --backup-rule=!: Backup rule that defines parameters for when and how a backup
            --backup-vault=!: ID of the Backup Vault or fully qualified identifier for the Backup Vault.
            --description=: Provide a description of the backup plan, such as specific use cases and
            --labels=: If you have assigned labels to your resources for grouping, you can
            --location=: The location of the Backup Plan.
            --log-retention-days=&: Configures how long logs will be stored.
            --max-custom-on-demand-retention-days=: Configure the maximum retention period for on-demand backups.
            --no-async&: Return immediately, without waiting for the operation in progress to
            --resource-type=!: Type of resource to which the backup plan should be applied.
        - name: delete
          description: Deletes a Backup Plan.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --location=: The location of the Backup Plan.
            --no-async&: Return immediately, without waiting for the operation in progress to
        - name: describe
          description: Show details of the backup plan.
          flags:
            --location=: Location ID of the resource.
        - name: list
          description: List backup plans in the project.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: ID of the location or fully qualified identifier for the location.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
        - name: update
          description: Update a specific backup plan.
          flags:
            --add-backup-rule=: Parameters of backup rule to be added to the Backup Plan.
            --async: Return immediately, without waiting for the operation in progress to
            --backup-rule=: Full definition of an existing backup rule with updated values.
            --backup-rules-from-file=: Path to a YAML or JSON file containing backup rules.
            --description=: Provide a description of the backup plan, such as specific use cases and
            --location=: The location of the Backup Plan.
            --log-retention-days=&: Configures how long logs will be stored.
            --max-custom-on-demand-retention-days=: Configure the maximum retention period for on-demand backups.
            --no-async&: Return immediately, without waiting for the operation in progress to
            --remove-backup-rule=: Name of an existing backup rule to be removed from the Backup Plan.
    - name: backup-vaults
      description: Manage Backup and DR backup vaults.
      commands:
        - name: create
          description: Create a Backup and DR backup vault.
          flags:
            --access-restriction=: Authorize certain sources and destinations for data being sent into, or restored from, the backup vault being created.
            --backup-min-enforced-retention=!: Backups will be kept for this minimum period before they can be deleted.
            --backup-retention-inheritance=: The inheritance mode for enforced retention end time of the backup within this backup vault.
            --description=: Optional description for the backup vault (2048 characters or less).
            --effective-time=: The time at which the enforced retention period becomes locked.
            --kms-key=: The Cloud KMS key resource name to be used for encryption.
            --labels=: Optional resource labels to represent metadata provided by the user.
            --location=: The location of the Backup Vault.
            --no-async: Wait for the operation in progress to complete.
          completion:
            flag:
                access-restriction:
                    - within-project
                    - within-org
                    - unrestricted
                    - within-org-but-unrestricted-for-ba
                backup-retention-inheritance:
                    - inherit-vault-retention
                    - match-backup-expire-time
        - name: delete
          description: Delete the specified Backup Vault.
          flags:
            --allow-missing: Allow idempotent deletion of backup vault.
            --ignore-backup-plan-references: 'If set, the following restrictions against deletion of the backup vault instance can be overridden: * deletion of a backup vault instance being actively referenced by a backup plan.'
            --ignore-inactive-datasources: 'If set, the following restrictions against deletion of the backup vault instance can be overridden: * deletion of a backup vault instance containing no backups,but still contains empty datasources.'
            --location=: The location of the Backup Vault.
            --no-allow-missing&: Allow idempotent deletion of backup vault.
            --no-async: Wait for the operation in progress to complete.
            --no-ignore-backup-plan-references&: 'If set, the following restrictions against deletion of the backup vault instance can be overridden: * deletion of a backup vault instance being actively referenced by a backup plan.'
            --no-ignore-inactive-datasources&: 'If set, the following restrictions against deletion of the backup vault instance can be overridden: * deletion of a backup vault instance containing no backups,but still contains empty datasources.'
        - name: describe
          description: Show the metadata for a Backup and DR backup vault.
          flags:
            --location=: The location of the Backup Vault.
        - name: list
          description: List Backup and DR backup vaults.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: ID of the location or fully qualified identifier for the location.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
        - name: update
          description: Update a Backup and DR backup vault.
          flags:
            --access-restriction=: Authorize certain sources and destinations for data being sent into, or restored from the current backup vault.
            --backup-min-enforced-retention=: Backups will be kept for this minimum period before they can be deleted.
            --description=: Optional description for the backup vault (2048 characters or less).
            --effective-time=: The time at which the enforced retention period becomes locked.
            --force-update: If set, allow update to extend the minimum enforced retention for backup vault.
            --force-update-access-restriction: If set, the access restriction can be updated even if there are non-compliant data sources.
            --location=: The location of the Backup Vault.
            --no-async: Wait for the operation in progress to complete.
            --no-force-update&: If set, allow update to extend the minimum enforced retention for backup vault.
            --no-force-update-access-restriction&: If set, the access restriction can be updated even if there are non-compliant data sources.
            --no-unlock-backup-min-enforced-retention&: Removes the lock on the backup minimum enforced retention period, and resets the effective time.
            --unlock-backup-min-enforced-retention: Removes the lock on the backup minimum enforced retention period, and resets the effective time.
          completion:
            flag:
                access-restriction:
                    - within-project
                    - within-org
                    - unrestricted
                    - within-org-but-unrestricted-for-ba
    - name: backups
      description: Manage Backup and DR backups.
      commands:
        - name: delete
          description: Delete the specified Backup.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --backup-vault=: The ID of the Backup Vault.
            --data-source=: The ID of the Data Source.
            --location=: The location of the Backup.
            --no-async&: Return immediately, without waiting for the operation in progress to
        - name: describe
          description: Show details of the backup.
          flags:
            --backup-vault=: The ID of the Backup Vault.
            --data-source=: The ID of the Data Source.
            --location=: Location ID of the resource.
        - name: fetch-for-resource-type
          description: Fetch Backups for a given resource type and location.
          flags:
            --backup-vault=: The ID of the Backup Vault.
            --data-source=!: ID of the Data Source or fully qualified identifier for the Data Source.
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: The location of the Data Source.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
        - name: list
          description: List Backups.
          flags:
            --backup-vault=: The ID of the Backup Vault.
            --data-source=: ID of the dataSource or fully qualified identifier for the dataSource.
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: Location ID of the resource.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
        - name: restore
          description: Manage restore operations for resources.
          commands:
            - name: compute
              description: Restores a Compute Engine VM Backup.
              flags:
                --accelerator=: Attaches accelerators (e.g. GPUs) to the instances.
                --async: Return immediately, without waiting for the operation in progress to
                --backup-vault=: The ID of the Backup Vault.
                --can-ip-forward: If provided, allows the restored instances to send and receive packets
                --confidential-compute: The restored instance boots with Confidential Computing enabled.
                --create-disk=: Creates and attaches persistent disks to the instances.
                --data-source=: The ID of the Data Source.
                --deletion-protection: Enables deletion protection for the restored instance.
                --description=: Specifies a textual description of the restored instance.
                --enable-display-device: Enable a display device on the restored VM instances.
                --enable-uefi-networking: If set to true, enables UEFI networking for the instance creation.
                --hostname=: Specify the hostname of the restore instance to be created.
                --instance-kms-key=: The Cloud KMS (Key Management Service) cryptokey that will be used to
                --instance-termination-action=: Specifies the termination action that will be taken upon VM preemption
                --key-revocation-action-type=: Specifies the behavior of the instance when the KMS key of one of its
                --labels=: List of label KEY=VALUE pairs to add.
                --local-ssd-recovery-timeout=: Specifies the maximum amount of time a Local SSD VM should wait while
                --location=: The location of the Backup.
                --machine-type=: Specifies the machine type used for the restored instance.
                --maintenance-policy=: Specifies the behavior of the VMs when their host machines undergo
                --metadata=: Metadata to be made available to the guest operating system
                --min-cpu-platform=: When specified, the VM will be scheduled on host with specified CPU
                --min-node-cpu=: Minimum number of virtual CPUs this instance will consume when running on
                --name=!: Name of the restored Compute Instance.
                --network-interface=: Adds a network interface to the instance.
                --network-performance-configs=: Configures network performance settings for the restored instance.
                --no-async&: Return immediately, without waiting for the operation in progress to
                --no-can-ip-forward&: If provided, allows the restored instances to send and receive packets
                --no-confidential-compute&: The restored instance boots with Confidential Computing enabled.
                --no-deletion-protection&: Enables deletion protection for the restored instance.
                --no-enable-display-device&: Enable a display device on the restored VM instances.
                --no-enable-uefi-networking&: If set to true, enables UEFI networking for the instance creation.
                --no-preemptible&: If provided, instances will be preemptible and time-limited.
                --no-restart-on-failure&: The instances will be restarted if they are terminated by Compute Engine.
                --no-scopes: Create the instance with no scopes.
                --node-affinity-file=&: The JSON/YAML file containing the configuration of desired nodes onto
                --preemptible: If provided, instances will be preemptible and time-limited.
                --private-ipv6-google-access-type=: The private IPv6 Google access type for the restored VM.
                --provisioning-model=: Specifies provisioning model, which determines price, obtainability,
                --reservation-affinity=: Specifies the reservation affinity of the instance.
                --reservation=: The name of the reservation, required when `--reservation-affinity=specific`.
                --resource-manager-tags=: Specifies a list of resource manager tags to apply to the instance.
                --resource-policies=: A list of resource policy names to be added to the instance.
                --restart-on-failure: The instances will be restarted if they are terminated by Compute Engine.
                --scopes=: If not provided, the instance will be assigned the default scopes, described below.
                --service-account=: A service account is an identity attached to the instance.
                --tags=: Specifies a list of tags to apply to the instance.
                --target-project=!: Project where the restore should happen.
                --target-zone=!: Zone where the target instance is restored.
                --threads-per-core=: The number of visible threads per physical core.
                --visible-core-count=: The number of physical cores to expose to the instance's guest operating
              completion:
                flag:
                    instance-termination-action:
                        - DELETE
                        - STOP
                    maintenance-policy:
                        - MIGRATE
                        - TERMINATE
                    provisioning-model:
                        - SPOT
                        - STANDARD
                    reservation-affinity:
                        - any
                        - none
                        - specific
            - name: disk
              description: Restores a Compute Disk Backup.
              flags:
                --access-mode=: Specifies how VMs attached to the disk can access the data on the disk.
                --architecture=: Specifies the architecture or processor type that this disk can support.
                --async: Return immediately, without waiting for the operation in progress to
                --backup-vault=: The ID of the Backup Vault.
                --clear-encryption-key: The restored disk reverts to GMEK (CMEK is disabled).
                --confidential-compute: Creates the disk with confidential compute mode enabled.
                --data-source=: The ID of the Data Source.
                --description=: Specifies a textual description of the restored disk.
                --guest-os-features=: Enables one or more features for VM instances that use the image for their boot disks.
                --kms-key=: The Cloud KMS (Key Management Service) cryptokey that will be used to protect the disk
                --labels=: List of label KEY=VALUE pairs to add.
                --licenses=: A list of URIs to license resources.
                --location=: The location of the Backup.
                --name=!: Name of the restored Disk.
                --no-async&: Return immediately, without waiting for the operation in progress to
                --no-clear-encryption-key&: The restored disk reverts to GMEK (CMEK is disabled).
                --no-confidential-compute&: ""
                --provisioned-iops=: Provisioned IOPS of disk to create.
                --provisioned-throughput=: Provisioned throughput of disk to create.
                --replica-zones=: A comma-separated list of exactly 2 URLs of the zones where the disk should be replicated to.
                --resource-policies=: A list of resource policy names to be added to the disk.
                --size=: Size of the disk in GB.
                --storage-pool=: Specifies the URI of the storage pool in which the disk is created.
                --target-project=!: Project where the restore should happen.
                --target-region=: Region where the target disk is restored.
                --target-zone=: Zone where the target disk is restored.
                --type=: URL of the disk type describing which disk type to use to restore the disk.
              completion:
                flag:
                    access-mode:
                        - READ_ONLY_MANY
                        - READ_WRITE_MANY
                        - READ_WRITE_SINGLE
                    architecture:
                        - ARM64
                        - X86_64
        - name: update
          description: Update the specified Backup.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --backup-vault=: The ID of the Backup Vault.
            --data-source=: The ID of the Data Source.
            --enforced-retention-end-time=: Backups cannot be deleted until this time or later.
            --expire-time=: The date when this backup is automatically expired.
            --location=: The location of the Backup.
            --no-async&: Return immediately, without waiting for the operation in progress to
    - name: data-source-references
      description: Command group for Backup and DR Data Source References.
      commands:
        - name: describe
          description: Show details of the data source reference.
          flags:
            --location=: Location ID of the resource.
        - name: fetch-for-resource-type
          description: Fetch Data Source References for a given resource type and location.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=!: Location for which data source references should be fetched.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
        - name: list
          description: List Backup and DR data source references.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: ID of the location or fully qualified identifier for the location.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
    - name: data-sources
      description: View Backup and DR data sources.
      commands:
        - name: describe
          description: Show details of the data source.
          flags:
            --backup-vault=: The ID of the Backup Vault.
            --location=: Location ID of the resource.
        - name: list
          description: List Data Sources.
          flags:
            --backup-vault=: ID of the backup_vault or fully qualified identifier for the backup_vault.
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: Location ID of the resource.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
    - name: locations
      description: Manage Backup and DR locations.
      commands:
        - name: list
          description: List available Backup and DR locations.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
    - name: management-servers
      description: Manage Backup and DR management server.
      commands:
        - name: create
          description: Create a new management server in the project.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --location=: The location of the Management Server.
            --network=: (DEPRECATED) Name of an existing VPC network with private service access configured in the format - projects/<project>/global/networks/<network>.
            --no-async&: Return immediately, without waiting for the operation in progress to
        - name: delete
          description: Delete the specified Management Server.
          flags:
            --async: Return immediately, without waiting for the operation in progress to
            --location=: The location of the Management Server.
            --no-async&: Return immediately, without waiting for the operation in progress to
        - name: describe
          description: Show details of the management server.
          flags:
            --location=: Location ID of the resource.
        - name: list
          description: List management servers in the project.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=: ID of the location or fully qualified identifier for the location.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
    - name: operations
      description: Manage Backup and DR operations.
      commands:
        - name: describe
          description: Describe an operation.
          flags:
            --location=: Location ID of the resource.
        - name: list
          description: List all operations.
          flags:
            --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
            --limit=: Maximum number of resources to list.
            --location=!: ID of the location or fully qualified identifier for the location.
            --no-uri&: Print a list of resource URIs instead of the default output, and change the
            --page-size=: Some services group resource list output into pages.
            --sort-by=: Comma-separated list of resource field key names to sort by.
            --uri: Print a list of resource URIs instead of the default output, and change the
    - name: service-config
      description: Manage Backup and DR Service configuration.
      commands:
        - name: init
          description: Initialize a Backup and DR Service configuration.
          flags:
            --location=!: ID of the location or fully qualified identifier for the location.
            --no-async: Wait for the operation in progress to complete.
            --resource-type=!: The resource type to which the default service configuration

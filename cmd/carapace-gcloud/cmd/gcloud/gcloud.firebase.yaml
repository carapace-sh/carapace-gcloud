# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: firebase
description: Work with Google Firebase.
commands:
    - name: test
      description: Interact with Firebase Test Lab.
      commands:
        - name: android
          description: Command group for Android application testing.
          commands:
            - name: models
              description: Explore Android models available in the Test Environment catalog.
              commands:
                - name: describe
                  description: Describe an Android model.
                - name: list
                  description: List all Android models available for testing.
                  flags:
                    --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                    --limit=: Maximum number of resources to list.
                    --page-size=: Some services group resource list output into pages.
                    --sort-by=: Comma-separated list of resource field key names to sort by.
            - name: run
              description: Invoke a test in Firebase Test Lab for Android and view test results.
              flags:
                --additional-apks=: A list of up to 100 additional APKs to install, in addition to those being directly tested.
                --app-package=: (REMOVED) The Java package of the application under test.
                --app=: The path to the application binary file.
                --async: Invoke a test asynchronously without waiting for test results.
                --auto-google-login: Automatically log into the test device using a preconfigured Google account before beginning the test.
                --client-details=: Comma-separated, KEY=VALUE map of additional details to attach to the test
                --device-ids=: 'The list of MODEL_IDs to test against (default: one device model determined by the Firebase Test Lab device catalog; see TAGS listed by the `$ {parent_command} models list` command).'
                --device=: A list of ``DIMENSION=VALUE'' pairs which specify a target device to test
                --directories-to-pull=: A list of paths that will be copied from the device's storage to the designated results bucket after the test is complete.
                --environment-variables=: A comma-separated, key=value map of environment variables and their
                --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                --limit=: Maximum number of resources to list.
                --locales=: 'The list of LOCALEs to test against (default: a single locale determined by the Firebase Test Lab device catalog).'
                --network-profile=: 'The name of the network traffic profile, for example `--network-profile=LTE`, which consists of a set of parameters to emulate network conditions when running the test (default: no network shaping; see available profiles listed by the $ {grandparent_command} network-profiles list command).'
                --no-async&: Invoke a test asynchronously without waiting for test results.
                --no-auto-google-login&: Automatically log into the test device using a preconfigured Google account before beginning the test.
                --no-performance-metrics&: 'Monitor and record performance metrics: CPU, memory, network usage, and FPS (game-loop only).'
                --no-record-video&: Enable video recording during the test.
                --no-resign&: Make Robo re-sign the app-under-test APK for a higher quality crawl.
                --no-use-orchestrator&: 'Whether each test runs in its own Instrumentation instance with the Android Test Orchestrator (default: Orchestrator is not used, same as specifying --no-use-orchestrator).'
                --num-flaky-test-attempts=: Specifies the number of times a test execution should be reattempted if
                --obb-files=: 'A list of one or two Android OBB file names which will be copied to each test device before the tests will run (default: None).'
                --orientations=: 'The device orientation(s) to test against (default: portrait).'
                --os-version-ids=: 'The list of OS_VERSION_IDs to test against (default: a version ID determined by the Firebase Test Lab device catalog).'
                --other-files=: A list of device-path=file-path pairs that indicate the device paths to
                --page-size=: Some services group resource list output into pages.
                --performance-metrics: 'Monitor and record performance metrics: CPU, memory, network usage, and FPS (game-loop only).'
                --record-video: Enable video recording during the test.
                --resign: Make Robo re-sign the app-under-test APK for a higher quality crawl.
                --results-bucket=: 'The name of a Google Cloud Storage bucket where raw test results will be stored (default: "test-lab-<random-UUID>").'
                --results-dir=: 'The name of a *unique* Google Cloud Storage object within the results bucket where raw test results will be stored (default: a timestamp with a random suffix).'
                --results-history-name=: 'The history name for your test results (an arbitrary string label; default: the application''s label from the APK manifest).'
                --robo-directives=: A comma-separated (`<type>:<key>=<value>`) map of `robo_directives` that you can use to customize the behavior of Robo test.
                --robo-script=: The path to a Robo Script JSON file.
                --scenario-labels=: 'A list of game-loop scenario labels (default: None).'
                --scenario-numbers=: 'A list of game-loop scenario numbers which will be run as part of the test (default: all scenarios).'
                --sort-by=: Comma-separated list of resource field key names to sort by.
                --test-package=: (REMOVED) The Java package name of the instrumentation test.
                --test-runner-class=: 'The fully-qualified Java class name of the instrumentation test runner (default: the last name extracted from the APK manifest).'
                --test-targets=: 'A list of one or more test target filters to apply (default: run all test'
                --test=: The path to the binary file containing instrumentation tests.
                --timeout=: 'The max time this test execution can run before it is cancelled (default: 15m).'
                --type=: The type of test to run.
                --use-orchestrator: 'Whether each test runs in its own Instrumentation instance with the Android Test Orchestrator (default: Orchestrator is not used, same as specifying --no-use-orchestrator).'
              completion:
                flag:
                    type:
                        - instrumentation
                        - robo
                        - game-loop
            - name: versions
              description: Explore Android versions available for testing.
              commands:
                - name: describe
                  description: Describe an Android OS version.
                - name: list
                  description: List all Android OS versions available for testing.
                  flags:
                    --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                    --limit=: Maximum number of resources to list.
                    --page-size=: Some services group resource list output into pages.
                    --sort-by=: Comma-separated list of resource field key names to sort by.
            - name: list-device-capacities
              description: List capacity information for Android models & versions.
              flags:
                --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                --limit=: Maximum number of resources to list.
                --page-size=: Some services group resource list output into pages.
                --sort-by=: Comma-separated list of resource field key names to sort by.
            - name: locales
              description: Explore Android locales available for testing.
              commands:
                - name: describe
                  description: Describe an Android locale.
                - name: list
                  description: List all Android locales available for testing internationalized apps.
                  flags:
                    --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                    --limit=: Maximum number of resources to list.
                    --page-size=: Some services group resource list output into pages.
                    --sort-by=: Comma-separated list of resource field key names to sort by.
        - name: ios
          description: Command group for iOS application testing.
          commands:
            - name: locales
              description: Explore iOS locales available for testing.
              commands:
                - name: describe
                  description: Describe an iOS locale.
                - name: list
                  description: List all iOS locales available for testing internationalized apps.
                  flags:
                    --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                    --limit=: Maximum number of resources to list.
                    --page-size=: Some services group resource list output into pages.
                    --sort-by=: Comma-separated list of resource field key names to sort by.
            - name: models
              description: Explore iOS models available in the Test Environment catalog.
              commands:
                - name: describe
                  description: Describe an iOS model.
                - name: list
                  description: List all iOS models available for testing.
                  flags:
                    --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                    --limit=: Maximum number of resources to list.
                    --page-size=: Some services group resource list output into pages.
                    --sort-by=: Comma-separated list of resource field key names to sort by.
            - name: run
              description: Invoke a test in Firebase Test Lab for iOS and view test results.
              flags:
                --app=: The path to the application archive (.ipa file) for game-loop testing.
                --async: Invoke a test asynchronously without waiting for test results.
                --client-details=: Comma-separated, KEY=VALUE map of additional details to attach to the test
                --device=: A list of ``DIMENSION=VALUE'' pairs which specify a target device to test
                --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                --limit=: Maximum number of resources to list.
                --no-async&: Invoke a test asynchronously without waiting for test results.
                --no-record-video&: Enable video recording during the test.
                --no-test-special-entitlements&: Enables testing special app entitlements.
                --num-flaky-test-attempts=: Specifies the number of times a test execution should be reattempted if
                --page-size=: Some services group resource list output into pages.
                --record-video: Enable video recording during the test.
                --results-bucket=: 'The name of a Google Cloud Storage bucket where raw test results will be stored (default: "test-lab-<random-UUID>").'
                --results-dir=: 'The name of a *unique* Google Cloud Storage object within the results bucket where raw test results will be stored (default: a timestamp with a random suffix).'
                --results-history-name=: 'The history name for your test results (an arbitrary string label; default: the bundle ID for the iOS application).'
                --sort-by=: Comma-separated list of resource field key names to sort by.
                --test-special-entitlements: Enables testing special app entitlements.
                --test=: The path to the test package (a zip file containing the iOS app and XCTest files).
                --timeout=: 'The max time this test execution can run before it is cancelled (default: 15m).'
                --type=: The type of iOS test to run.
                --xcode-version=: The version of Xcode that should be used to run an XCTest.
                --xctestrun-file=: The path to an .xctestrun file that will override any .xctestrun file contained in the *--test* package.
              completion:
                flag:
                    type:
                        - xctest
                        - game-loop
                        - robo
            - name: versions
              description: Explore iOS versions available for testing.
              commands:
                - name: describe
                  description: Describe an iOS operating system version.
                - name: list
                  description: List all iOS versions available for testing.
                  flags:
                    --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                    --limit=: Maximum number of resources to list.
                    --page-size=: Some services group resource list output into pages.
                    --sort-by=: Comma-separated list of resource field key names to sort by.
            - name: list-device-capacities
              description: List capacity information for iOS models & versions.
              flags:
                --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                --limit=: Maximum number of resources to list.
                --page-size=: Some services group resource list output into pages.
                --sort-by=: Comma-separated list of resource field key names to sort by.
        - name: network-profiles
          description: Explore network profiles available for testing.
          commands:
            - name: describe
              description: Describe a network profile.
            - name: list
              description: List all network profiles available for testing.
              flags:
                --filter=: Apply a Boolean filter _EXPRESSION_ to each resource item to be listed.
                --limit=: Maximum number of resources to list.
                --page-size=: Some services group resource list output into pages.
                --sort-by=: Comma-separated list of resource field key names to sort by.
